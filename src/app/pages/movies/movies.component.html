
<div class="container">
  <h1>Movies</h1>
  <form [formGroup]="movieForm">
    <mat-form-field appearance="fill" *ngIf="movieGenres() as movieGenre;">
      <mat-label>Select a movie genre</mat-label>
      <mat-select formControlName="selectedGenre" color="accent">
        <mat-option *ngFor="let genre of movieGenre" [value]="genre.id">{{ genre.name }}</mat-option>
      </mat-select>
    </mat-form-field>
  
  </form>
  <ng-container *ngIf="movieListByGenre() as movies; else loading;">
    <div *ngIf="movies.length > 0">
      <h3>Movies in {{ selectedGenreId | genre }} category</h3>
      <div class="movieList">
          <div class="movieList__container">
            <moma-movie-card
              *ngFor="let movie of movies" [movie]="movie"
              (click)="onMovieClick(movie.id)">
              <mat-card-title 
                [ngClass]="{'trimmed': movie.title.length > 16}"
                [matTooltip]="displayTooltip(movie.title)">{{ movie.title  | trimText: 16 }}</mat-card-title>
            </moma-movie-card>
          </div>
      </div>
    </div>
  </ng-container>
  <ng-template #loading><mat-spinner class="loader"></mat-spinner></ng-template>  
</div>